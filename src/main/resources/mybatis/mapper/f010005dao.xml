<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.amtf.demo.dao.F010005Dao">
	<!-- 我参加的活动 -->
	<select id="f010005_Select1" resultType="com.amtf.demo.f010005entity.F010005_Select1Entity">
		SELECT
			A1.*,B1.*,COUNT(B1.ACTIVITY_ID) AS COUNT
		FROM
			AMTF_ACTIVITY A1
		LEFT JOIN
			AMTF_USERACTIVITY B1
		ON
			A1.ACTIVITY_ID = B1.ACTIVITY_ID
        LEFT JOIN
			AMTF_USERACTIVITY C1
        ON
			C1.ACTIVITY_ID = B1.ACTIVITY_ID
        WHERE
			C1.USERACTIVITY_NAME = #{name}
		GROUP BY
			A1.ACTIVITY_ID
	</select>
	<!-- 我发布的活动 -->
	<select id="f010005_Select2" resultType="com.amtf.demo.f010005entity.F010005_Select1Entity">
		SELECT
			A1.*,B1.*,COUNT(B1.ACTIVITY_ID) AS COUNT
		FROM
			AMTF_ACTIVITY A1
		LEFT JOIN
			AMTF_USERACTIVITY B1
		ON
			A1.ACTIVITY_ID = B1.ACTIVITY_ID
        LEFT JOIN
			AMTF_ACTIVITY C1
        ON
			C1.ACTIVITY_ID = A1.ACTIVITY_ID
        WHERE
			C1.ACTIVITY_NAME = #{name}
		GROUP BY
			A1.ACTIVITY_ID
	</select>
	<!-- 详细活动 -->
	<select id="f010005_Select3" resultType="com.amtf.demo.commonentity.AmtfActivityEntity">
		SELECT
			*
		FROM
			AMTF_ACTIVITY
		WHERE
			ACTIVITY_ID = #{id}
	</select>
	<!-- 活动发布人信息 -->
	<select id="f010005_Select4" resultType="com.amtf.demo.commonentity.AmtfUserEntity">
		SELECT
			*
		FROM
			AMTF_USER
		WHERE
			USER_EMAIL = #{email}
	</select>
	<!-- 活动评论 -->
	<select id="f010005_Select5" resultType="com.amtf.demo.commonentity.AmtfActivityCommentEntity">
		SELECT
			B1.*
		FROM
			AMTF_ACTIVITY A1
		LEFT JOIN
			AMTF_ACTIVITY_COMMENT B1
		ON
			A1.ACTIVITY_ID = B1.ACTIVITY_ID
        WHERE
			A1.ACTIVITY_ID= #{id}
	</select>
	<!-- 发表一级评论 -->
	<insert id="f010005_Insert6">
		INSERT INTO
			AMTF_ACTIVITY_COMMENT
		VALUES(
			#{entity.activity_comment_id}
			,#{entity.activity_id}
			,#{entity.user_id}
			,#{entity.user_name}
			,#{entity.user_text});
	</insert>
	<!-- 活动二级评论 -->
	<select id="f010005_Select7" resultType="com.amtf.demo.commonentity.AmtfActivityCommentReplyEntity">
		SELECT
			*
		FROM
			AMTF_ACTIVITY_COMMENT_REPLY
		WHERE
			ACTIVITY_COMMENT_ID = #{id}
	</select>
	<!-- 发表二级评论 -->
	<insert id="f010005_Insert8">
		INSERT INTO
			AMTF_ACTIVITY_COMMENT_REPLY
		VALUES(
			#{entity.activity_comment_reply_id}
			,#{entity.activity_comment_id}
			,#{entity.user_id}
			,#{entity.user_name}
			,#{entity.user_text});
	</insert>
</mapper>
