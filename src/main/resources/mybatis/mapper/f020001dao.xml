<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.amtf.demo.dao.F020001Dao">
	<select id="f020001_Select1" resultType="com.amtf.demo.f010001entity.F010001_Select1Entity">
		SELECT
			 *
		FROM 
			AMTF_User
		WHERE
			USER_power &lt; #{pow}
	</select>
	<select id="f020001_Select2" resultType="com.amtf.demo.f010001entity.F010001_Select1Entity">
		SELECT
			 *
		FROM 
			AMTF_User
		WHERE 
			USER_power &lt; #{select2.pow}
		<if test="select2.search_name != ''">
		AND
			USER_Name like '%${select2.search_name}%'
		</if>
		<if	test="select2.select_state != 2">
		AND
			USER_Attestation = #{select2.select_state}
		</if>
		<if	test="select2.search_account != ''">
		AND
			User_Account like '%${select2.search_account}%'
		</if>
		<if	test="select2.search_phone != ''">
		AND
			User_Phone like '%${select2.search_phone}%'
		</if>
	</select>
	<!-- 发布通知 -->
	<insert id="f020001_insert3">
		INSERT 
		INTO
			AMTF_UPDNOTICE
		VALUES(
			#{id}
			,#{name}
			,#{head}
			,#{text}
			,NOW()
		)
	</insert>
	<!-- 刪除指定用戶id -->
	<delete id="f020001_Delect4">
		DELETE FROM 
			AMTF_USER
		WHERE
			USER_ID = #{userid}
	</delete>
	<!-- 获取通知 -->
	<select id="f020001_Select5" resultType="com.amtf.demo.f020001entity.F020001_Select5Entity">
		SELECT 
			*
		FROM 
			AMTF_UPDNOTICE 
		WHERE 
			UPDNOTICE_ID NOT IN(SELECT UPDNOTICEOVER_UPID FROM AMTF_UPDNOTICEOVER)
		AND UPDNOTICE_NAME != #{id}
	</select>
	<!-- 发布活动 -->
	<insert id="f020001_insert6">
		INSERT 
		INTO
			AMTF_ACTIVITY
		VALUES(
			#{id}
			,#{name}
			,#{head}
			,#{check}
			,#{sttymd}
			,#{endymd}
			,#{text}
			,NOW()
		)
	</insert>
	<!-- 查询可访问的页面 -->
	<select id="f020001_Select7" resultType="com.amtf.demo.f020001entity.F020001_Select7Entity">
		SELECT
			 *
		FROM 
			AMTF_POWER_ADMIN
		WHERE 
			power_pow &lt;= CONVERT(#{pow} USING gb2312)
	</select>
	<!-- 根据id查询用户信息 -->
	<select id="f020001_Select8" resultType="com.amtf.demo.commonentity.AmtfUserEntity">
		SELECT
			 *
		FROM
			AMTF_USER
		WHERE
			USER_EMAIL = #{userId}
	</select>
	<!-- 获取参加活动的次数 -->
	<select id="f020001_Select9" resultType="java.lang.Integer">
		SELECT
			COUNT(*)
		FROM
			AMTF_USERACTIVITY
		WHERE
			USERACTIVITY_NAME = #{userId}
	</select>
	<!-- 发布问题的次数 -->
	<select id="f020001_Select10" resultType="java.lang.Integer">
		SELECT
			COUNT(*)
		FROM
			AMTF_QA
		WHERE
			USER_ID = #{userId}
	</select>
	<!-- 发布视频的次数 -->
	<select id="f020001_Select11" resultType="java.lang.Integer">
		SELECT
			COUNT(*)
		FROM
			AMTF_VIDEO
		WHERE
			USER_ID = #{userId}
	</select>
</mapper>
