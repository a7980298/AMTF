<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.amtf.demo.dao.F060001Dao">
	<!-- 发布问题 -->
	<insert id="f060001_Insert1">
		INSERT INTO
			AMTF_QA
		VALUES(
			#{entity.qa_id},
			#{entity.user_id},
			#{entity.qa_head},
			#{entity.qa_text},
			#{entity.qa_class1},
			#{entity.qa_class2},
			#{entity.qa_class3},
			NOW()
		)
	</insert>
	<!-- 问题标签 -->
	<select id="f060001_Select2" resultType="com.amtf.demo.commonentity.AmtfQaClassEntity">
		SELECT
			*
		FROM
			AMTF_QA_CLASS
	</select>
	<!-- 最新问题一栏 -->
	<select id="f060001_Select3" resultType="com.amtf.demo.f060001entity.F060001_Select3Entity">
		SELECT
			QA.*,
    		USERS.USER_NAME AS USER_NAME,
    		(SELECT
    			QA_CLASS_NAME
    		FROM
    			AMTF_QA_CLASS
    		WHERE QA_CLASS_ID = QA.QA_CLASS1
    		) AS QA_CLASSNAME1,
   			(SELECT
   				QA_CLASS_NAME
   			FROM
   				AMTF_QA_CLASS
   			WHERE
   				QA_CLASS_ID = QA.QA_CLASS2
   			) AS QA_CLASSNAME2,
   			(SELECT
   				QA_CLASS_NAME
   			FROM
   				AMTF_QA_CLASS
   			WHERE
   				QA_CLASS_ID = QA.QA_CLASS3
   			) AS QA_CLASSNAME3
		FROM
			AMTF_QA QA
		LEFT JOIN
			AMTF_USER USERS
		ON
			QA.USER_ID = USERS.USER_EMAIL
		ORDER BY
			QA.QA_TIME DESC
		LIMIT 30
	</select>
	<!-- 回答问题 -->
	<insert id="f060001_Insert4">
		INSERT INTO
			amtf_qa_reply
		VALUES(
			#{entity.qa_reply_id},
			#{entity.qa_id},
			#{entity.user_id},
			#{entity.qa_reply_text},
			NOW()
		)
	</insert>
	<!-- 详细问题 -->
	<select id="f060001_Select5" resultType="com.amtf.demo.commonentity.AmtfQaEntity">
		SELECT
			*
		FROM
			AMTF_QA
		WHERE
			QA_ID = #{id}
	</select>
	<!-- 详细回答 -->
	<select id="f060001_Select6" resultType="com.amtf.demo.commonentity.AmtfQaReplyEntity">
		SELECT
			*
		FROM
			AMTF_QA_REPLY
		WHERE
			QA_ID = #{id}
	</select>
	<!-- 获取用户信息 -->
	<select id="f060001_Select7" resultType="com.amtf.demo.commonentity.AmtfUserEntity">
		SELECT
			*
		FROM
			AMTF_USER
		WHERE
			USER_EMAIL = #{id}
	</select>
	<!-- 获取问题标签 -->
	<select id="f060001_Select8" resultType="com.amtf.demo.commonentity.AmtfQaClassEntity">
		SELECT
			*
		FROM
			AMTF_QA_CLASS
		WHERE
			QA_CLASS_ID IN(#{class1},#{class2},#{class3})
	</select>
	<!-- 提问数量 -->
	<select id="f060001_Select9" resultType="int">
		SELECT
			COUNT(*)
		FROM
			AMTF_QA
		WHERE
			USER_ID = #{id}
	</select>
	<!-- 回答数量 -->
	<select id="f060001_Select10" resultType="int">
		SELECT
			COUNT(*)
		FROM
			AMTF_QA_REPLY
		WHERE
			USER_ID = #{id}
	</select>
</mapper>
